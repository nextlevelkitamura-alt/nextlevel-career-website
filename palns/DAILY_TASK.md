# DAILY_TASK (Lv.3: 作業日誌)

## 📅 直近の作業ログ (Latest Update)
**Date**: 2026-01-29

1. **求人ファイル事前登録の修正**
   - `uploadDraftFile` のバグ修正 (`job_id` nullエラー解消)。
   - ドラッグ＆ドロップと複数ファイルアップロード機能の実装。

2. **モバイルナビゲーション更新**
   - ハンバーガーメニューに「相談する」リンクを追加（「求人を探す」の下）。

3. **チャットUI改善 (モバイル)**
   - `fixed` レイアウトを適用し、スマホアプリのような操作感（画面固定・スクロール制御）を実現。
   - メッセージエリアのみがスクロールするように修正。

## 🚀 本日の作業予定 (Current Task)
**Target**: Mobile Chat Improvements & AI Job Gen Extension & Admin UI Fixes

### 0. MCP接続設定 (Priority High)
- [x] **SPAR-based MCPの接続**:
    - 作業効率向上のため、適切なMCPサーバーを接続/設定する。
    - 接続情報は `.env.local` に安全に保存済み (`supabase/API_KEYS_README.md` 参照)。

### 1. デプロイ & 環境設定 (Current)
- [ ] **Mobile Chat修正のデプロイ**:
    - `feature/mobile-chat-refactor` ブランチ等で作業し、mainにマージしてデプロイ。
- [ ] **Localhost認証リダイレクト設定**:
    - SupabaseおよびGoogle Cloud Consoleの設定変更手順を案内し、ローカルでのGoogleログインを可能にする。

### 2. モバイルチャット改善 (Completed)
- [x] **モバイル専用ページ/コンポーネントの分離**:
- [x] **モバイル専用ページ/コンポーネントの分離**:
    - 既存の `page.tsx` を無理に改造せず、モバイル用のChat UIコンポーネント（例: `MobileChatLayout`）として分離し、責務を分ける。
    - これにより、将来的な機能追加やスクロール制御を容易にする。
- [x] **ヘッダー修正**:
    - `fixed` レイアウト内で、ロゴとホーム戻るボタンを適切に配置。
    - 現在の「サポートチャット」テキストに加え、左上にロゴ、右上に電話ボタンを配置。
- [x] **スクロール & 過去ログ**:
    - メッセージ数が増えた際にスムーズにスクロールできることを保証。
    - （必要であれば）古いメッセージを読み込むUIの実装。
- [x] **電話発信ボタン**:
    - ヘッダー右上に電話アイコン追加。タップで `tel:` リンク発動。

### 2. 求人生成AI機能の拡張
- [ ] **生成ボタンの2系統化**:
    - 管理画面「求人作成」ページにボタンを追加。
    - A: 「通常生成（具体名あり）」: 既存のプロンプトを使用。
    - B: 「匿名生成（ぼかし）」: 新規プロンプト開発。「具体的な企業名は出さず、業種・魅力で表現せよ」といった指示を追加。
- [ ] **API/Server Action改修**:
    - `generateJobDescription` アクションに `mode` 引数を追加し、プロンプトを分岐させる。

### 3. 管理画面・スマホプレビュー改善
- [ ] **PDFプレビューのレイアウト変更**:
    - モバイル表示時、PDF表示エリアを全画面ではなく縦並びに配置し、AI生成結果や入力フォームと同時（またはスクロールで）に見られるようにする。
    - `flex-col` などを活用し、画面が狭くても操作可能なUIにする。

## 📝 完了した作業 (Completed)
- [x] モバイルチャットUIの固定レイアウト化
- [x] ハンバーガーメニューの「相談する」リンク位置変更

---
*Memo for Next AI:*
現在、作業コンテキストは完全にクリアな状態です。新しいタスクを開始する際は、まずここを更新してください。
